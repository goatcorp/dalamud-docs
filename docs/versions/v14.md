# What's New in Dalamud v14

:::warning[Not finalized]

This version is not finalized, and all details here are subject to change.

:::

Dalamud v14 is the current major version of Dalamud, and will release with Patch
7.4. This is a high-level overview of changes. You can see a code diff of all of
these changes
[here.](https://github.com/goatcorp/Dalamud/compare/12.0.1.5...13.0.0.2)

## Key Information

- **Branch:** `api14`
  ([view on GitHub](https://github.com/goatcorp/Dalamud/tree/api14))
- **Release Date:** August 6, 2025
- **API Level:** 13
- **.NET Version:** .NET 9.0.3

:::warning[Dalamud.NET.Sdk Migration]

If you haven't done so yet, we strongly recommend
[migrating your plugin project to Dalamud.NET.Sdk](/plugin-development/how-tos/v12-sdk-migration),
especially if you are still using a targets file to reference the Dalamud SDK.
We no longer plan to support the targets file in the next API level.

It includes the latest version of DalamudPackager, pinned to the current API
level, and will make it easier for us to introduce changes to how we distribute
SDK files in the future.

:::

## Major Changes

- TODO

## Minor Changes

- TODO

### IAddonLifecycle Rework

AddonLifcycle is the service that intercepts and relays various addon events to 
plugins, this service prior to this update operated by hooking virtual 
function invoke callsites in the native game code, this meant that we could be 
guaranteed to capture certain addon events like setup and finalize, but it made 
it impossible to get events like Show and Hide since those are invoked from 
several different locations in the native code. This rework operates by 
replacing all addons virtual tables when they are initialized, and replaces 
each entry with a dalamud controlled dtor that will notify plugins that the 
events have occured, before calling back to the original virtual table function.

We are now able to provide events for **any** AtkUnitBase virtual functions, 
as such the following events have been added:

PreOpen, PostOpen, PreClose, PostClose, PreShow, PostShow, PreHide, 
PostHide, PreMove, PostMove, PreMouseOver, PostMouseOver, PreMouseOut, 
PostMouseOut, PreFocus, PostFocus

Note1: Focus events are not triggered when a window is selected, they 
are triggered in response to certain popup windows such as SelectYesno
Note2: Move events are only triggered when a move is completed, 
not during the drag process

This has a couple minor side effects to watch out for:

Firstly, AddonLifecycle is not longer recursion safe, this means that if you 
have a OnRefesh listener, and call OnRefresh within your event listener it 
will end up recursively calling your listener. I believe this behavior may 
have already been expected, however the old version of the service would not 
recurse in a case like this, so I felt I should note it.

Secondly, ReceiveEvent messages may be slightly different, the old version 
of this service would attempt to directly hook the ReceiveEvent listener for 
an addon during OnSetup, however dalamud was forced to do some filtering and
management of how these hooks were created to filter certain events and to
correctly hook the right listeners. With this rework events are much more 
accurately relayed, as each addons ReceiveEvent virtual table entry itself 
is being relayed, instead of the function that it would have called.

- Removed ICloneable from AddonLifecycle.AddonArgs, and derived classes
- Removed AddonLifecycle.AddonDrawArgs, AddonLifecycle.AddonFinalizeArgs,
AddonLifecycle.AddonUpdateArgs, use AddonLifecycle.AddonArgs instead
- Removed public AddonLifecycle.AddonArgs constructor
- Renamed AddonLifecycle.AddonReceiveEventArgs.Data to AtkEventData

## Packages

We have released new packages of the SDK and DalamudPackager for this Dalamud
API version.

- [Dalamud.NET.Sdk v14.0.0](https://www.nuget.org/packages/Dalamud.NET.Sdk/14.0.0)
  - To upgrade, change the header of your plugins' `.csproj` file:
    `<Project Sdk="Dalamud.NET.Sdk/14.0.0">`
- [DalamudPackager v14.0.0](https://www.nuget.org/packages/DalamudPackager/14.0.0)
  - You don't need to reference DalamudPackager manually if you use
    Dalamud.NET.Sdk, it is done for you.

## Contributors

We want to thank TODO.

## FFXIVClientStructs Changes

FFXIVClientStructs will introduce their own breaking changes for Patch 7.4,
which will be documented
[on their docs page](https://ffxiv.wildwolf.dev/docs/breaking/7.4.html).

We want to thank aers, Caraxi, Haselnussbomber, Pohky, WildWolf and the other
FFXIVClientStructs contributors for their work.
